(function(t){function a(a){for(var n,o,s=a[0],l=a[1],c=a[2],d=0,p=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(a);while(p.length)p.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],n=!0,s=1;s<e.length;s++){var l=e[s];0!==i[l]&&(n=!1)}n&&(r.splice(a--,1),t=o(o.s=e[0]))}return t}var n={},i={app:0},r=[];function o(a){if(n[a])return n[a].exports;var e=n[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=n,o.d=function(t,a,e){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var n in t)o.d(e,n,function(a){return t[a]}.bind(null,n));return e},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=a,s=s.slice();for(var c=0;c<s.length;c++)a(s[c]);var u=l;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var n=e("19b3"),i=e.n(n);i.a},"19b3":function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("v-content",[e("v-toolbar",{attrs:{dark:!0,flat:""}},[e("v-toolbar-title",[t._v("Parallel Text Viewer with TEI & IIIF")]),e("v-spacer"),e("v-btn",{attrs:{icon:""},on:{click:function(a){a.stopPropagation(),t.dialog_settings=!0}}},[e("v-icon",[t._v("mdi-settings")])],1),e("v-btn",{attrs:{icon:""},on:{click:function(a){a.stopPropagation(),t.dialog_information=!0}}},[e("v-icon",[t._v("mdi-information")])],1),e("v-toolbar-items",[e("v-btn",{attrs:{text:"",href:t.return_url}},[t._v(t._s(t.return_label))])],1)],1),e("div",{style:"height: "+t.height+"px;"},[e("splitpanes",{staticClass:"default-theme"},[e("pane",{attrs:{"min-size":"20"}},[e("iframe",{staticClass:"py-2 px-2",staticStyle:{border:"none"},attrs:{src:t.mirador_path,seamless:"seamless",width:"100%",height:t.height+"px"}})]),e("pane",[e("splitpanes",{staticClass:"default-theme",attrs:{horizontal:"horizontal"}},[e("pane",{staticClass:"py-2 mx-2"},[e("v-card",{staticClass:"scroll vertical",attrs:{flat:!0}},[e("v-card-text",{staticClass:"mx-2 text--primary"},[e("h2",{staticClass:"text--primary"},[t._v(t._s(t.label_main))]),e("br"),t._l(t.data_main_e,(function(a,n){return e("p",{key:n},[a.manifest?e("span",[e("img",{staticClass:"mr-2",staticStyle:{width:"30px"},attrs:{src:"https://iiif.dl.itc.u-tokyo.ac.jp/images/iiif.png"},on:{click:function(e){return t.clickIcon(a.id)}}}),e("br")]):t._e(),t._l(a.words,(function(a,n){return e("span",{key:n,style:-1!=t.hightlights.indexOf(a.id)?"background-color : yellow;":null,attrs:{id:a.id},on:{mouseover:t.mouseover_main,click:function(e){return t.scroll(a.id)}}},[t._v(t._s(a.value))])}))],2)}))],2)],1)],1),e("pane",{staticClass:"py-2 mx-2"},[e("v-card",{staticClass:"scroll vertical",attrs:{flat:!0}},[e("v-list-item",[e("v-card-text",{staticClass:"mx-2 text--primary"},[e("h2",{staticClass:"text--primary"},[t._v(t._s(t.label_sub))]),e("br"),t._l(t.data_sub,(function(a,n){return e("p",{key:n},t._l(a,(function(a,n){return e("span",{key:n,style:-1!=t.hightlights.indexOf(a.id)?"background-color : yellow;":null,attrs:{id:a.id},on:{mouseover:t.mouseover,click:function(e){return t.scroll(a.id)}}},[t._v(t._s(a.value))])})),0)}))],2)],1)],1)],1)],1)],1)],1)],1)],1),e("v-dialog",{attrs:{width:"600px"},model:{value:t.dialog_information,callback:function(a){t.dialog_information=a},expression:"dialog_information"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("このツールの説明")]),e("v-card-text",[t._v("Let Google help apps determine location. This means sending anonymous location data to Google, even when no apps are running.")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary"},on:{click:function(a){t.dialog_information=!1}}},[t._v("閉じる")])],1)],1)],1),e("v-dialog",{attrs:{width:"600px"},model:{value:t.dialog_settings,callback:function(a){t.dialog_settings=a},expression:"dialog_settings"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("設定")]),e("v-card-text",[t._v("Let Google help apps determine location. This means sending anonymous location data to Google, even when no apps are running.")]),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{color:"secondary"},on:{click:function(a){t.dialog_settings=!1}}},[t._v("閉じる")])],1)],1)],1)],1)},r=[],o=(e("99af"),e("c975"),e("fb6a"),e("b0c0"),e("ac1f"),e("841c"),e("1276"),e("498a"),e("512e")),s=e("bc3a"),l=e.n(s),c={components:{Splitpanes:o["Splitpanes"],Pane:o["Pane"]},data:function(){return{width:window.innerWidth,height:window.innerHeight,return_url:null,return_label:null,dialog_information:!1,dialog_settings:!1,url_main:"",url_sub:"",test:"",data_main:[],data_sub:[],data_main_e:[],data_sub_e:[],hightlights:[],m_s_id_map:[],s_m_id_map:[],w_l_id_map:{},l_w_id_map:{},image_map:{},label_main:"",label_sub:"",selected_manifests:[],mirador_path:""}},mounted:function(){var t=this;window.addEventListener("resize",this.handleResize);var a=this.$route.query.u?this.$route.query.u:"assets/config_e.json";l.a.get(a).then((function(a){var e=a.data;t.return_url=e.return_url,t.return_label=e.return_label,t.url_main=e.url_main,t.label_main=e.label_main,t.label_sub=e.label_sub;var n=e.image_map;l.a.get(n).then((function(a){for(var n=[],i=a.data,r=[],o={},s=i["selections"],l=0;l<s.length;l++){var c=s[l],u=c.within,d=u.label,p=u["@id"];o[d]={manifest:p,data:{}},n.push({manifest:p}),t.selected_manifests.push(d);for(var _=c.members,m=0;m<_.length;m++){var h=_[m],f=h.label;r[f]||r.push(f),o[d].data[f]=h["@id"]}}t.image_map=o,t.mirador_path="https://nakamura196.github.io/genji/mirador2/index_params.html?params="+encodeURIComponent(JSON.stringify(n))+"&annotationState=on",t.exec2main(e.url_main,r)}));var i=e.url_map;l.a.get(i).then((function(a){var e=a.data,n={};for(var i in e)for(var r=e[i],o=0;o<r.length;o++){var s=r[o];n[s]||(n[s]=[]),n[s].push(i)}t.m_s_id_map=n,t.s_m_id_map=e;var l={},c={};for(var u in n){var d=u.split("#"),p=d[0],_=d[1].split(":"),m=_[0],h=_[1];c[u]=[];for(var f=m;f<h;f++){var v=p+"#"+f;l[v]=u,c[u].push(v)}}t.w_l_id_map=l,t.l_w_id_map=c}))}))},watch:{$route:function(){this.search()}},methods:{clickIcon:function(t){for(var a=this.selected_manifests,e=[],n=0;n<a.length;n++){var i=a[n],r=this.image_map[i].data;r[t]&&e.push({manifest:this.image_map[i].manifest,canvas:r[t]}),this.mirador_path="https://nakamura196.github.io/genji/mirador2/index_params.html?params="+encodeURIComponent(JSON.stringify(e))+"&annotationState=on"}},scroll:function(t){alert(t)},mouseover_main:function(t){if(t.target.attributes.length>0&&"id"==t.target.attributes[0].name){var a=t.target.attributes[0].value,e=this.w_l_id_map[a],n=[];if(this.m_s_id_map[e]){var i=this.m_s_id_map[e];n=i;for(var r=0;r<i.length;r++)for(var o=i[r],s=this.s_m_id_map[o],l=0;l<s.length;l++){var c=s[l],u=this.l_w_id_map[c];n=n.concat(u)}}this.hightlights=n}},mouseover:function(t){if(t.target.attributes.length>0&&"id"==t.target.attributes[0].name){var a=t.target.attributes[0].value,e=[a];if(this.s_m_id_map[a])for(var n=this.s_m_id_map[a],i=0;i<n.length;i++){var r=n[i],o=this.l_w_id_map[r];e=e.concat(o)}this.hightlights=e}},handleResize:function(){this.width=window.innerWidth,this.height=window.innerHeight},exec2main:function(t,a){var e=this;l.a.get(t,{responseType:"document"}).then((function(t){for(var n=t.data,i="line",r="*|id",o=n.querySelectorAll(i+"["+r+"]"),s=[],l=0;l<o.length;l++){for(var c=o[l],u=c.attributes[0].value,d=c.childNodes,p="",_=[],m=0;m<d.length;m++){var h=d[m],f=h.innerText||h.textContent;p+=f.trim()}for(var v=0;v<p.length;v++){var g=p.slice(v,v+1);_.push({value:g,id:u+"#"+v})}var b={id:u,words:_};-1!=a.indexOf(u)&&(b["manifest"]=!0),s.push(b),e.data_main_e=s}e.data_sub=[[{value:"どの天皇様の御代であったか、女御とか更衣とかいわれる後宮がおおぜいいた中に、最上の貴族出身ではないが深い御愛寵を得ている人があった。",id:"YG0000000100"}],[{value:"最初から自分こそはという自信と、親兄弟の勢力に恃む所があって宮中にはいった女御たちからは失敬な女としてねたまれた。",id:"YG0000000200"}],[{value:"その人と同等、もしくはそれより地位の低い更衣たちはまして嫉妬の焔を燃やさないわけもなかった。",id:"YG0000000300"}],[{value:"すくれて時めき給ありけりはしめより我",id:"YG0000000400"}]]}))}},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}},u=c,d=(e("034f"),e("2877")),p=e("6544"),_=e.n(p),m=e("7496"),h=e("8336"),f=e("b0af"),v=e("99d9"),g=e("a75b"),b=e("169a"),y=e("132d"),w=e("da13"),x=e("2fa4"),k=e("71d9"),C=e("2a7f"),O=Object(d["a"])(u,i,r,!1,null,null,null),S=O.exports;_()(O,{VApp:m["a"],VBtn:h["a"],VCard:f["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VContent:g["a"],VDialog:b["a"],VIcon:y["a"],VListItem:w["a"],VSpacer:x["a"],VToolbar:k["a"],VToolbarItems:C["a"],VToolbarTitle:C["b"]});var T=e("8c4f");n["a"].use(T["a"]);var V=[{path:"/",name:"index"}],j=new T["a"]({base:"",routes:V,scrollBehavior:function(){return{x:0,y:0}}}),P=j,I=e("f309");n["a"].use(I["a"]);var z=new I["a"]({});n["a"].config.productionTip=!1,new n["a"]({router:P,vuetify:z,render:function(t){return t(S)}}).$mount("#app")}});
//# sourceMappingURL=app.749e7e7c.js.map